<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recuperação de Senha</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="recuperar-container">
    <h1>Recuperar Senha</h1>
    <form id="recuperarForm">
      <label for="usuarioRecuperar">Usuário</label>
      <input type="text" id="usuarioRecuperar" name="usuarioRecuperar" required>

      <button type="button" onclick="recuperarSenha()">Recuperar</button>
      
      <div id="senhaAtual" style="display: none;"></div>
      <div id="novaSenhaSecao" style="display: none;">
        <label for="novaSenha">Nova Senha</label>
        <input type="password" id="novaSenha" name="novaSenha">
        <button type="button" onclick="salvarNovaSenha()">Salvar Nova Senha</button>
      </div>

      <span id="mensagemSenha" style="display: none; color: red;"></span>
    </form>
  </div>

  <script>
    function recuperarSenha() {
      const usuario = document.getElementById('usuarioRecuperar').value;
      const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
      const usuarioEncontrado = usuarios.find(u => u.nome === usuario);
      
      if (usuarioEncontrado) {
        document.getElementById('senhaAtual').innerHTML = `Sua senha atual é: <strong>${usuarioEncontrado.senha}</strong>`;
        document.getElementById('senhaAtual').style.display = 'block';
        document.getElementById('novaSenhaSecao').style.display = 'block';
      } else {
        document.getElementById('mensagemSenha').textContent = 'Usuário não encontrado!';
        document.getElementById('mensagemSenha').style.color = 'red';
        document.getElementById('mensagemSenha').style.display = 'block';
      }
    }

    function salvarNovaSenha() {
      const usuario = document.getElementById('usuarioRecuperar').value;
      const novaSenha = document.getElementById('novaSenha').value;
      const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
      const usuarioEncontrado = usuarios.find(u => u.nome === usuario);
      
      if (usuarioEncontrado) {
        usuarioEncontrado.senha = novaSenha;
        localStorage.setItem('usuarios', JSON.stringify(usuarios));
        alert('Senha alterada com sucesso!');
        window.location.href = 'login.html'; // Redireciona para login
      } else {
        alert('Erro ao alterar senha. Tente novamente.');
      }
    }
  </script>
</body>
</html>