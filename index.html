<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Lista de Chamada - Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <!-- Tela de Login -->
  <div id="loginSection" class="container mt-5">
    <h2>Login</h2>
    <form id="loginForm">
      <div class="mb-3">
        <label for="loginUsername" class="form-label">Usuário</label>
        <input type="text" class="form-control" id="loginUsername" required>
      </div>
      <div class="mb-3">
        <label for="loginPassword" class="form-label">Senha</label>
        <input type="password" class="form-control" id="loginPassword" required>
      </div>
      <button type="submit" class="btn btn-primary">Entrar</button>
    </form>
    <div id="loginError" class="text-danger mt-3" style="display:none;">Credenciais inválidas</div>
  </div>

  <!-- Área Admin -->
  <div id="adminSection" class="container mt-5" style="display:none;">
    <h2>Bem-vindo, Admin</h2>
    <p>Aqui ficam as funcionalidades de administrador.</p>
    <button class="btn btn-secondary" onclick="logout()">Sair</button>
  </div>

  <!-- Área Professor -->
  <div id="professorSection" class="container mt-5" style="display:none;">
    <h2>Bem-vindo, Professor</h2>
    <p>Aqui ficam as funcionalidades do professor.</p>
    <button class="btn btn-secondary" onclick="logout()">Sair</button>
  </div>

  <script>
    const defaultUsers = [
      { nome: "admin", senha: "123", role: "admin" },
      { nome: "professor", senha: "123", role: "professor" }
    ];
    localStorage.setItem("usuarios", JSON.stringify(defaultUsers));

    const loginForm = document.getElementById("loginForm");
    const loginError = document.getElementById("loginError");

    loginForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const nome = document.getElementById("loginUsername").value;
      const senha = document.getElementById("loginPassword").value;
      const usuarios = JSON.parse(localStorage.getItem("usuarios"));

      const user = usuarios.find(u => u.nome === nome && u.senha === senha);

      if (user) {
        localStorage.setItem("usuarioLogado", JSON.stringify(user));
        mostrarArea(user.role);
      } else {
        loginError.style.display = "block";
      }
    });

    function mostrarArea(role) {
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("loginError").style.display = "none";
      if (role === "admin") {
        document.getElementById("adminSection").style.display = "block";
      } else {
        document.getElementById("professorSection").style.display = "block";
      }
    }

    function logout() {
      localStorage.removeItem("usuarioLogado");
      location.reload();
    }

    // Se o usuário já estiver logado, exibe a área dele
    window.onload = () => {
      const usuario = JSON.parse(localStorage.getItem("usuarioLogado"));
      if (usuario) {
        mostrarArea(usuario.role);
      }
    };
  </script>
</body>
</html>